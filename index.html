<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriConnect - Agricultural Marketplace</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Include Header Component -->
    <div id="header-placeholder">
        <!-- Header will be loaded here by JavaScript -->
    </div>

    <nav class="navbar">
        <div class="nav-links">
            <a href="index.html" class="active">Home</a>
            <a href="marketplace.html">Marketplace</a>
            <a href="farming-guides.html">Farming Guides</a>
            <a href="discussion-forums.html">Discussion Forums</a>
            <a href="articles.html">Research Articles</a>
            <a href="video-tutorials.html">Video Tutorials</a>
            <a href="chatbot.html">AI Chatbot</a>
        </div>
        <div class="nav-buttons">
            <button class="cart-btn">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count">0</span>
            </button>
            <a href="login.html" class="login-btn">Login</a>
        </div>
    </nav>

    <section class="hero">
        <div class="hero-content">
            <h1>Farm to Table, <br>Simplified</h1>
            <p>Connect directly with farmers, detect crop diseases instantly, and revolutionize your agricultural business.</p>
            <div class="hero-buttons">
                <button class="btn primary-btn" onclick="scrollToSection('#disease-detection')">Get Started</button>
                <button class="btn secondary-btn" onclick="scrollToSection('#marketplace')">Learn More</button>
            </div>
        </div>
    </section>

    <section id="marketplace" class="marketplace">
        <h2>Marketplace</h2>
        <div class="search-container">
            <input type="text" id="product-search" placeholder="Search for vegetables, fruits, or grains...">
            <button onclick="searchProducts()">Search</button>
        </div>
        <div class="search-results"></div>
        <div class="product-filters">
            <button class="filter-btn active" data-category="All">All</button>
            <button class="filter-btn" data-category="Vegetables">Vegetables</button>
            <button class="filter-btn" data-category="Fruits">Fruits</button>
            <button class="filter-btn" data-category="Grains">Grains</button>
        </div>
        <div class="product-grid">
            <!-- Products will be loaded dynamically here -->
        </div>
    </section>

    <!-- Disease Detection Section -->
    <section id="disease-detection" class="disease-detection">
        <div class="container">
            <h2>AI-Powered Crop Disease Detection</h2>
            <p>Upload an image of your crop to detect diseases and get recommendations</p>
            
            <div class="detection-container">
                <div class="upload-container">
                    <div class="upload-box" id="uploadBox">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p>Drag & Drop or Click to Upload</p>
                        <input type="file" id="imageInput" accept="image/*" style="display: none;">
                    </div>
                    <div class="crop-type-selector">
                        <label for="cropType">Select Crop Type:</label>
                        <select id="cropType">
                            <option value="">Select a crop</option>
                            <option value="rice">Rice</option>
                            <option value="wheat">Wheat</option>
                        </select>
                    </div>
                </div>
                
                <div class="result-section">
                    <div id="resultBox" class="result-box">
                        <div class="initial-state">
                            <i class="fas fa-microscope"></i>
                            <p>Upload an image and select crop type to analyze</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Community Resources Section -->
    <section id="community" class="community">
        <h2>Community & Resources</h2>
        <div class="resources-grid">
            <!-- Farming Guides Card -->
            <div class="resource-card">
                <div class="guide-image">
                    <img src="https://images.unsplash.com/photo-1592982537447-6f2a1a4c9acf?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Farming Guides">
                </div>
                <i class="fas fa-book"></i>
                <h3>Farming Guides</h3>
                <p>Access comprehensive guides on modern farming techniques and best practices.</p>
                <a href="farming-guides.html" class="resource-link">
                    <i class="fas fa-arrow-right"></i>
                    Explore Guides
                </a>
            </div>

            <!-- Discussion Forums Card -->
            <div class="resource-card">
                <div class="guide-image">
                    <img src="https://images.unsplash.com/photo-1521737711867-e3b97375f902?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Discussion Forums">
                </div>
                <i class="fas fa-comments"></i>
                <h3>Discussion Forums</h3>
                <p>Join the community and participate in farming discussions with fellow farmers.</p>
                <a href="discussion-forums.html" class="resource-link">
                    <i class="fas fa-arrow-right"></i>
                    Join Discussion
                </a>
            </div>

            <!-- Video Tutorials Card -->
            <div class="resource-card">
                <div class="guide-image">
                    <img src="https://images.unsplash.com/photo-1590602847861-f357a9332bbc?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Video Tutorials">
                </div>
                <i class="fas fa-video"></i>
                <h3>Video Tutorials</h3>
                <p>Watch expert-led video tutorials on various farming techniques and practices.</p>
                <a href="videos.html" class="resource-link">
                    <i class="fas fa-arrow-right"></i>
                    Watch Videos
                </a>
            </div>

            <!-- Research & Articles Card -->
            <div class="resource-card">
                <div class="guide-image">
                    <img src="https://images.unsplash.com/photo-1434030216411-0b793f4b4173?ixlib=rb-1.2.1&auto=format&fit=crop&w=500&q=60" alt="Research & Articles">
                </div>
                <i class="fas fa-newspaper"></i>
                <h3>Research & Articles</h3>
                <p>Stay updated with latest agricultural research, news, and innovations.</p>
                <a href="articles.html" class="resource-link">
                    <i class="fas fa-arrow-right"></i>
                    Read Articles
                </a>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <h2>About AgriConnect</h2>
        <div class="about-content">
            <div class="about-text">
                <p>AgriConnect is a platform that bridges the gap between farmers and consumers, making fresh produce accessible to everyone while providing AI-powered crop disease detection to help farmers protect their crops.</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-handshake"></i>
                    <h3>Direct Connection</h3>
                    <p>Connect directly with local farmers</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-robot"></i>
                    <h3>AI Detection</h3>
                    <p>Advanced crop disease detection</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-shield-alt"></i>
                    <h3>Secure Payments</h3>
                    <p>Safe and reliable transactions</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Contact Section -->
    <section id="contact" class="contact">
        <h2>Contact Us</h2>
        <div class="contact-container">
            <form id="contactForm">
                <input type="text" placeholder="Name" required>
                <input type="email" placeholder="Email" required>
                <textarea placeholder="Message" required></textarea>
                <button type="submit" class="submit-btn">Send Message</button>
            </form>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-section">
                <h3>AgriConnect</h3>
                <p>Connecting farmers with consumers</p>
            </div>
            <div class="footer-section">
                <h3>Quick Links</h3>
                <a href="#home">Home</a>
                <a href="#marketplace">Marketplace</a>
                <a href="#disease-detection">Disease Detection</a>
                <a href="#community">Community</a>
                <a href="#about">About</a>
                <a href="#contact">Contact</a>
            </div>
            <div class="footer-section">
                <h3>Connect With Us</h3>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                </div>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2024 AgriConnect. All rights reserved.</p>
        </div>
    </footer>

    <!-- Login Modal -->
    <div class="modal" id="loginModal">
        <div class="modal-content">
            <span class="close-modal">&times;</span>
            <div class="modal-header">
                <h2>Welcome Back</h2>
                <p>Login to access your account</p>
            </div>
            <form id="loginForm" class="login-form">
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" required>
                    <i class="fas fa-envelope"></i>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" required>
                    <i class="fas fa-lock"></i>
                </div>
                <div class="form-options">
                    <label class="remember-me">
                        <input type="checkbox">
                        <span>Remember me</span>
                    </label>
                    <a href="#" class="forgot-password">Forgot Password?</a>
                </div>
                <button type="submit" class="login-submit-btn">Login</button>
                <div class="social-login">
                    <p>Or login with</p>
                    <div class="social-buttons">
                        <button type="button" class="google-btn">
                            <i class="fab fa-google"></i>
                            Google
                        </button>
                        <button type="button" class="facebook-btn">
                            <i class="fab fa-facebook-f"></i>
                            Facebook
                        </button>
                    </div>
                </div>
                <div class="register-link">
                    Don't have an account? <a href="#" class="register-btn">Register</a>
                </div>
            </form>
        </div>
    </div>

    <!-- Cart Modal -->
    <div class="cart-modal">
        <div class="cart-content">
            <div class="cart-header">
                <h2>Shopping Cart</h2>
                <button class="close-cart">&times;</button>
            </div>
            <div class="cart-items">
                <!-- Cart items will be dynamically added here -->
            </div>
            <div class="cart-footer">
                <div class="cart-total">
                    <span>Total:</span>
                    <span class="total-amount">‚Çπ0</span>
                </div>
                <button class="checkout-btn">Proceed to Checkout</button>
            </div>
        </div>
    </div>

    <!-- Chatbot Widget -->
    <div class="chat-widget">
        <!-- Floating Button -->
        <button class="chat-widget-button" id="chatToggle">
            <i class="fas fa-robot"></i>
            <span class="notification-badge">1</span>
        </button>

        <!-- Chat Window -->
        <div class="chat-widget-container" id="chatWidget">
            <!-- Chat Header -->
            <div class="widget-header">
                <div class="widget-header-info">
                    <img src="assets/bot-avatar.png" alt="AgriBot" class="widget-avatar">
                    <div class="widget-title">
                        <h3>AgriBot Assistant</h3>
                        <span class="widget-status">Online</span>
                    </div>
                </div>
                <div class="widget-actions">
                    <button class="minimize-btn" id="minimizeChat">
                        <i class="fas fa-minus"></i>
                    </button>
                    <button class="close-btn" id="closeChat">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
            </div>

            <!-- Chat Messages -->
            <div class="widget-messages" id="widgetMessages">
                <!-- Welcome Message -->
                <div class="widget-message bot">
                    <img src="assets/bot-avatar.png" alt="AgriBot" class="message-avatar">
                    <div class="message-bubble">
                        <p>üëã Hello! I'm your AgriBot assistant.</p>
                        <p>I can help you with:</p>
                        <ul>
                            <li>üå± Crop Management</li>
                            <li>üîç Disease Detection</li>
                            <li>üêõ Pest Control</li>
                            <li>üå§Ô∏è Weather Advisory</li>
                            <li>üíß Irrigation Tips</li>
                        </ul>
                        <p>How can I assist you today?</p>
                    </div>
                </div>
            </div>

            <!-- Quick Actions -->
            <div class="widget-quick-actions">
                <button class="quick-action-btn">
                    <i class="fas fa-bug"></i>
                    Disease Check
                </button>
                <button class="quick-action-btn">
                    <i class="fas fa-cloud-sun"></i>
                    Weather Tips
                </button>
                <button class="quick-action-btn">
                    <i class="fas fa-seedling"></i>
                    Crop Guide
                </button>
                <button class="quick-action-btn">
                    <i class="fas fa-tint"></i>
                    Water Tips
                </button>
            </div>

            <!-- Chat Input -->
            <div class="widget-input">
                <button class="widget-attach">
                    <i class="fas fa-paperclip"></i>
                </button>
                <input type="text" placeholder="Type your message..." id="widgetInput">
                <button class="widget-send" id="widgetSend">
                    <i class="fas fa-paper-plane"></i>
                </button>
            </div>
        </div>
    </div>

    <script>
        // Load header component
        document.addEventListener('DOMContentLoaded', function() {
            fetch('components/header.html')
                .then(response => response.text())
                .then(html => {
                    document.getElementById('header-placeholder').outerHTML = html;
                })
                .catch(error => {
                    console.error('Error loading header:', error);
                });
        });
    </script>
    <script src="script.js"></script>
    <script src="chatbot-logic.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const chatToggle = document.getElementById('chatToggle');
        const chatWidget = document.getElementById('chatWidget');
        const closeChat = document.getElementById('closeChat');
        const minimizeChat = document.getElementById('minimizeChat');
        const widgetInput = document.getElementById('widgetInput');
        const widgetSend = document.getElementById('widgetSend');
        const widgetMessages = document.getElementById('widgetMessages');
        const quickActions = document.querySelectorAll('.quick-action-btn');

        // Initialize the AgriBot
        const bot = new AgriBot();

        // Toggle chat widget
        chatToggle.addEventListener('click', () => {
            chatWidget.classList.toggle('active');
            chatToggle.querySelector('.notification-badge').style.display = 'none';
        });

        // Close chat widget
        closeChat.addEventListener('click', () => {
            chatWidget.classList.remove('active');
        });

        // Minimize chat widget
        minimizeChat.addEventListener('click', () => {
            chatWidget.classList.remove('active');
        });

        // Send message function
        async function sendMessage(message, isUser = true) {
            // Create message element
            const messageDiv = document.createElement('div');
            messageDiv.className = `widget-message ${isUser ? 'user' : 'bot'}`;

            const avatar = document.createElement('img');
            avatar.src = isUser ? 'assets/user-avatar.png' : 'assets/bot-avatar.png';
            avatar.alt = isUser ? 'User' : 'Bot';
            avatar.className = 'message-avatar';

            const bubble = document.createElement('div');
            bubble.className = 'message-bubble';

            // Handle message content
            if (typeof message === 'string') {
                // Split message by newlines and create paragraphs
                const paragraphs = message.split('\n');
                paragraphs.forEach(text => {
                    if (text.trim()) {
                        const p = document.createElement('p');
                        p.textContent = text;
                        bubble.appendChild(p);
                    }
                });
            } else {
                bubble.textContent = message;
            }

            messageDiv.appendChild(avatar);
            messageDiv.appendChild(bubble);
            widgetMessages.appendChild(messageDiv);

            // Scroll to bottom
            widgetMessages.scrollTop = widgetMessages.scrollHeight;

            // If user message, get bot response
            if (isUser) {
                // Show typing indicator
                const typingDiv = document.createElement('div');
                typingDiv.className = 'widget-message bot typing';
                typingDiv.innerHTML = `
                    <img src="assets/bot-avatar.png" alt="Bot" class="message-avatar">
                    <div class="message-bubble">
                        <div class="typing-indicator">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>
                `;
                widgetMessages.appendChild(typingDiv);
                widgetMessages.scrollTop = widgetMessages.scrollHeight;

                // Get bot response after a delay
                setTimeout(async () => {
                    // Remove typing indicator
                    widgetMessages.removeChild(typingDiv);
                    
                    // Get and send bot response
                    const response = await bot.processMessage(message);
                    sendMessage(response, false);
                }, 1000);
            }
        }

        // Handle send button click
        widgetSend.addEventListener('click', () => {
            const message = widgetInput.value.trim();
            if (message) {
                sendMessage(message);
                widgetInput.value = '';
            }
        });

        // Handle enter key
        widgetInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                const message = widgetInput.value.trim();
                if (message) {
                    sendMessage(message);
                    widgetInput.value = '';
                }
            }
        });

        // Handle quick actions
        quickActions.forEach(button => {
            button.addEventListener('click', () => {
                const message = button.textContent.trim();
                sendMessage(message);
            });
        });
    });
    </script>
</body>
</html> 
